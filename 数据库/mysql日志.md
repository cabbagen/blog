
### 一、概要

mysql 日志记录了mysql数据库日常操作和错误信息。mysql 有不同类型的日志文件（各自储存了不同类型的日志），从日志当中可以查询到mysql数据库的运行情况、用户操作、错误信息等，可以作为mysql管理和优化提供必要的信息。对于mysql的管理工作而言，这些日志文件是不可缺少的。

mysql 日志主要分为 4 类，使用这些日志文件，可以查看 mysql 内部发生的事情。这 4 类日志分别是：

* 错误日志：记录mysql服务的启动、运行或停止mysql服务时出现的问题。

* 查询日志：记录建立的客户端连接和执行的语句。

* 二进制日志：记录所有更改数据的语句，可以用于数据复制。

* 慢查询日志：记录所有执行时间超过  long_query_time 的所有查询或不使用索引的查询。

默认情况下，所有日志创建于 mysql 数据目录中，通过刷新日志，可以强制mysql关闭和重新打开日志文件（或者在某些情况下切换到一个心的日志文件）。当执行一个 FLUSH LOGS 语句或执行 mysqladmin flush-logs 或 mysqladmin refresh 时，将刷新日志。

如果正使用 mysql 复制功能，在复制服务器上可以维护更多日志文件，这种日志称为接替日志。

启动日志功能会降低mysql数据库的性能。例如，在查询非常频繁的mysql数据库系统中，如果开启了通用查询日志和慢查询日志，mysql 数据库会花费很多的时间来记录日志。同时，日志会占用大量的磁盘空间。


### 二、二进制日志

二进制日志主要记录 mysql 数据库的变化。二进制日志以一种有效的格式，并且是事务安全的方式包含更新日志中可用的所有信息。二进制日志包含了所有更新了数据或者已经潜在更新了数据（例如，没有匹配任何行的一个 DELETE）的语句。语句以“事件”的形式保存，描述数据更改。

二进制日志还包含关于每个更新数据库的语句的执行时间信息。它不包含没有修改任何数据的语句。如果还想要记录所有语句（例如，为了识别有问题的查询），需要使用一般查询日志。使用二进制日志的主要目的是最大可能的恢复数据库，因为二进制日志包含备份后进行所有更新。