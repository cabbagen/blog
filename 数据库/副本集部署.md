
#### 一、注意事项

##### 构建

在生产环境中，在各自的机器上部署复制集。并且尽可能的绑定 mongodb 的标准端口


##### IP 绑定

使用 **bind_ip** 参数设置允许链接至 mongodb 的 IP。例如：
````
mongod --bind_ip 127.0.0.1

mongo --host My-Example-Associated-Hostname
````

##### 网络链接

确保复制集的每个成员都能够通过 DNS 或者 域名解析等方式 都是可访问的。你可以配置你的 DNS 或者 host 文件

##### 配置

* 在部署复制集之前，需要先配置好 dbpath 的路径。

* 复制集需要的参数比较多，一般会将启动参数写到配置文件中。 

##### 分配成员节点

尽可能使用奇数的复制集成员，这样可以最大限度的利用复制集的“大多数性原则”，剩余的副本集成员可以构成多数或至少提供数据的副本

##### 选举成员节点

不要部署超过 7 个的选举节点

##### 先决条件

部署每个数据中心在不同的系统上，尽管你可以部署不止一个数据中心在同一个系统。这样做可以减少复制集的冗余和容量。此类部署通常用于测试目的

##### 程序

1）对于部署三个成员的复制集，你可以有两种策略：

* 跨越三个数据中心：一个成员在一个站点

* 跨越两个数据中心：两个成员分别 A 站点 和 B 
站点，如果复制集的一个成员是投票节点（arbiter）,部署 投票节点到 A 站点。

2）跨两个数据中心分发副本集成员可以提供单个数据中心的优势。在两个数据中心分发中：

* 如果其中一个数据中心发生故障，则数据仍然可用于读取，这与单个数据中心分发不同。

* 如果具有少数成员的数据中心发生故障，则副本集仍可以提供写操作以及读操作

* 但是，如果具有大多数成员的数据中心发生故障，则副本集将变为只读
