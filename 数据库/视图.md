
#### 一、关于视图
数据库中的视图是一个虚拟表。同真实的表一样，视图包含一系列带有名称的行和列数据。行和列数据来自于由定义视图查询所引用的表，并且在引用视图时动态生成。

视图一经定义便存储在数据库中，与其相对应的数据并没有像表那样在数据库中再存储一份，通过视图看到的数据只是存放在基本表中的数据。对视图的操作与对表的操作一样，可以对其进行查询、修改、删除。当对通过视图看到的数据进行修改时，相应的基本表的数据也要发生变化；同时，若基本表的数据发生变化，则这种变化也可以自动的反映到视图中。


#### 二、视图的作用

* 简单化 

> 看到的就是需要的。视图不仅可以简化用户对数据的理解，也可以简化他们的操作。那些被经常使用的查询可以被定义为视图，从而使得用户不必为以后的操作每次指定全部的条件。

* 安全性

> 通过视图用户只能查询和修改他们所见到的数据。数据库中的其他数据则既看不见也取不到。数据库授权命令可以使每个用户对数据库的检索限制到特定的数据库对象上，但不能授权到数据库特定行和特定的列上。通过视图，用户可以被限制在数据的不同子集上：
>
> * 使用权限可被限制在基表的行的子集上。
>
> * 使用权限可被限制在基表的列的子集上。
>
> * 使用权限可被限制在基表的行和列的子集上。
>
> * 使用权限可被限制在多个基表的链接所限定的行上。
>
> * 使用权限可被限制在基表中的数据的统计汇总上。
>
> * 使用权限可被限制在另一视图的一个子集上，或是一些视图和基表合并的子集上。

* 逻辑数据独立性

> 视图可帮助用户屏蔽真实表结构变化带来的影响。


#### 三、创建视图
````
CREATE [ OR REPLACE ] [ ALGORITHM = { UNDEFINED | MERGE | TEMPTABLE }]
VIEW view_name [ (column_list) ]
AS SELECT_statement
[ WITH [ CASCADED | LOCAL ] CHECK OPTION ]

/**
 * CRATE 表示创建新的视图; REPLACE 表示替换已经创建的视图;
 * ALGORITHM 表示视图选择的算法;
 * view_name 为视图的名称，column_list 为属性列;
 * SELECT_statement 表示 SELECT 语句;
 * WITH [ CASCADED | LOCAL ] CHECK OPTION 参数表示视图在更新时保证在视图的权限范围之内
 *
 * ALGORITHM 的取值有 3 个，分别为 UNDEFINED | MERGE | TEMPTABLE
 * UNDEFINED 表示 mysql 将自动选择算法
 * MERGE 表示将使用的视图语句与视图定义合并起来，使得视图定义的某一部分取代语句对应的部分
 * TEMPLATE 表示将视图的结果存入临时表，然后用临时表来执行语句 
 *
 * CASCADED 与 LOCAL 为可选参数
 * CASCADED 为默认值，表示更新视图时要满足所有相关视图和表的条件
 * LOCAL 表示更新视图时满足该视图本身定义的条件即可
 */
````

#### 四、查看视图信息

````
DESC view_name;

SHOW TABLE STATUS LIKE view_name\G;

SHOW CREATE VIEW view_name\G;

SELECT * FROM information_schema.views\G;

````

#### 五、修改视图

修改视图是指修改数据库中存在的视图，当基本表的某些字段发生变化的时候，可以通过修改视图来保持与基本表的一致性。

````
CREATE [OR REPLACE] [ALOGORITHM = {UNDEFINED | MERGE | TEMPTABLE}]
VIEW view_name [(column_list)]
AS SELECT_statement
[WITH [CASCADED | lOCAL] CHECK OPTION]

/**
 * 修改视图的语句和创建视图的语句是完全一样的。
 * 当视图已经存在时，修改语句对视图进行修改；
 * 当视图不存在时，创建视图
 */

````

````
ALTER [ALGORITHM = {UNDEFINED | MERGE | TEMPTABLE}]
VIEW view_name [(column_list)]
AS SELECT_statement
[WITH [CASCADED | LOCAL] CHECK OPTION]

````

#### 六、更新视图

更新视图是指通过视图来插入、更新、删除表中的数据，因为视图是一个虚拟表，其中没有数据。通过视图更新的时候都是转到基本表上进行更新的，如果对视图增加或者删除记录，实际是对其基本表增加或者删除记录。

视图数据的操作与表类似，但是当视图中包含有如下内容是，视图的更新操作将不能被执行。

* 视图中不包含基表中被定义为为空的列。

* 在定义视图的 SELECT 语句后的字段列表中使用了数学表达式。

* 在定义视图的 SELECT 语句后的字段列表中使用了聚合函数。

* 在定义视图的 SELECT 语句中使用了 DISTINCT, UNION, TOP, GROUP BY, HAVING 字句。


#### 七、删除视图

````
DROP VIEW [IF EXISTS] view_name [, view_name, ...] [RESTRICT | CASCADE]

````


#### 八、mysql 中视图和表的区别以及联系

> 两者的区别

* 视图是已经编译好的 sql 语句，是基于 sql 语句的结果集的可视化表，而表不是。

* 视图没有实际的物理记录，而表有。

* 表是内容，视图是窗口。

* 表占用物理空间而视图不占用物理空间，视图只是逻辑概念的存在。表可以及时对它进行修改，但视图只能用创建的语句来修改。

* 视图是查看数据表的一种方法，可以查询数据表中某些字段构成的数据，只是一些 sql 语句的集合。从安全的角度来说，视图可以防止用户接触数据表，因而用户不知道表结构。

* 表属于全局模式中的表，是实表；视图属于局部模式的表，是虚表。

* 视图的建立和删除只能影响视图本身，不影响对应的基本表。

> 两者的联系

视图是在基本表之上建立的表，它的结构（即所定义的列）和内容（即所有记录）都来自于基本表，它依据基本表存在而存在。一个视图可以对应一个基本表，也可以对应多个基本表。视图是基本表的抽象和在逻辑意义上建立的新关系。